<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Bug Game</title>  
<script src="modernizr.js"></script>
<script type="text/javascript">
window.addEventListener('load', eventWindowLoaded, false);	
function eventWindowLoaded() {
	canvasApp();
}

function canvasSupport () {
  	return Modernizr.canvas;
}


function canvasApp() 
{
	
  if (!canvasSupport()) 
  {
      return;
  }
    
    theCanvas = document.getElementById("canvasOne");
    context = theCanvas.getContext("2d");
    
    var buttons = [];
    var tempButton={};
    
    
    
    var xStart = theCanvas.width+50;
    var x = xStart;
    var yStart = 700;
    var y = yStart;
    const GAME_STATE_TITLE = 0;
    const GAME_STATE_NEW_LEVEL = 1;
    const GAME_STATE_GAME_OVER = 2;
    
    var currentGameState = 0;
    var currentGameStateFunction = null;
    
    var titlestarted = false; 
    var keypresslst = []; 
    
    function runGame(){
        currentGameStateFunction();
        
    }
    
    function switchGameState(newState) {
        currentGameState = newState;
        
        switch (currentGameState) {
                
            case GAME_STATE_TITLE:
                
                currentGameStateFunction = gameStatePlayLevel;
                
                break;
                
            case GAME_STATE_NEW_LEVEL:
                
                currentGameStateFunction = gameStatePlayLevel;
                
                break;
                
            case GAME_STATE_GAME_OVER:
                
                currentGameStateFunction = gameStateGameOver;
                
                break;
        }
    }
    
    
    
  
    
  
    
    
    //Title Screen input
    function gameStateTitle()
    { 
        if (titlestarted !=true){
			
			context.fillText  ("BugGame", 130, 70);
			context.fillText  ("Press Space To Play", 120, 140);
			
			titlestarted=true;
		}
        else
        {
			//wait for space key click
			if (keypresslst[32]==true)
            {
				ConsoleLog.log("space pressed");
				switchGameState(GAME_STATE_NEW_LEVEL);
				titlestarted=false;
				
			}
        }
        
    } 
    function gameStatePlayLevel()
    {
        ConsoleLog.log("appStateGamePlay");
        //image
        var parkImage = new Image();
        parkImage.src = "park.jpg";
    
    function  drawScreen () 
    {                
        //image
        context.drawImage(parkImage, 0,0);
        
        // Draw weapons bar
        context.fillStyle = 'black';
        context.fillRect(0,theCanvas.height-100,
                         theCanvas.width,100);
        
        //Draw Wave Counter
        context.fillStyle    = "#0000BB";
        context.font         = "50px Sans-Serif";
        context.textBaseline = "top";
        context.fillText  ("Wave 1", 20,
                           theCanvas.height-60);
        
        //Health Bar Draw
        var health=100;
        context.fillStyle="#FF0000";
        context.fillRect(220,theCanvas.height-40,
                         (health/100)*140,25);
        
        // Draw bug
        context.fillStyle = '#FF0000';
        context.fillRect(x,y,10,10);
        context.fillRect(x+15,y,10,10);
        context.fillRect(x,y+15,10,10);
        context.fillRect(x+15,y+15,10,10);
        
        if (x!=429)
        {
            x=x-3;
            y=y-((yStart-171)/(xStart-430))*(3);
            
        }
    }
    }
    function gameStateGameOver() {
        ConsoleLog.log("appStateGameOver");
    }
    
    switchGameState(GAME_STATE_TITLE);
	
    
    const FRAME_RATE = 40;
    var intervalTime = 1000/FRAME_RATE;
        
	function gameLoop() 
    {
        
            
        runGame(); 
            window.setTimeout(gameLoop, intervalTime);
        
    }
         
    gameLoop();
    
          //create function that will be added to the class
console_log=function(message) {
	if(typeof(console) !== 'undefined' && console != null) 
    {
		console.log(message);
	}
} 
//add class/static function to class by assignment
ConsoleLog.log=console_log;
    
}


</script>
    
</head>
<body>
<div style="position: absolute; top: 50px; left: 50px;">
    
<canvas id="canvasOne" width="1600" height="900">
 Your browser does not support the HTML 5 Canvas. 
</canvas>
</div>
</body>
</html>